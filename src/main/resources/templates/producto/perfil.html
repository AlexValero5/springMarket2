<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <title>Perfil</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
	

	<style>
		#titulo{
		text-align: center;
		}
		
	</style>

</head>

<body>
	<h1 id="titulo" th:text="${producto.nombreProducto}"></h1>

	<nav th:replace="fragments/header_loader"></nav>
  
 
  <div class="card" style="width: 18rem;">
 <img class="card-img-top" src="/images/caja.jpg" alt="Card image cap">
  <div class="card-body">
	    <h5 class="card-title"><span th:text="${producto.nombreProducto}"></span> </h5>
	    <p class="card-text"><span th:text="${producto.descripcionProducto}"></span></p>
	  </div>
	  <ul class="list-group list-group-flush">
	    <li class="list-group-item"><span th:text="${producto.precioProducto} + '$'"></span></li>
	    <li class="list-group-item"><span th:text="${producto.descripcionProducto}"></span></li>
	    <li class="list-group-item"><span th:text="${producto.idProducto}"></span></li>
	  </ul>
	  <div class="card-body">
	  	<p th:if="${#authorization.expression('hasAuthority(''ROL_ADMIN'')')}">
	    <a th:href="@{'/producto/borrar/{idProducto}'(idProducto=${producto.idProducto})}"
										class="btn btn-danger" ><i class="fas fa-trash">Borrar Producto</i></a>
		</p>
			
		<p th:if="${#authorization.expression('hasAuthority(''ROL_ADMIN'') OR hasAuthority(''ROL_USUARIO'')')}">							
		<a th:href="@{'/producto/agregarProducto/{idProducto}'(idProducto=${producto.idProducto})}"
										class="btn btn-danger" >Añadir al Carrito</a>
		</p>
	    
	  </div>
	</div>


	<div id="preguntas">
		<form >
		 <form >
			<label for="pregunta">Pregunte aquí</label>
			<textarea 	name="pregunta" id="textoPregunta" placeholder="Escriba su Pregunta sobre el producto"></textarea>
			<textarea 	name="idProducto" id="idProducto" th:text="${producto.idProducto}" style="display: none;"></textarea> 
			<button type="button" id="publicarPregunta">Publicar Pregunta</button>
		</form>
		
		<div id="preguntaError"></div>
	</div>

	<table class="table table-bordered"  width="100%" style="width: 40%;">
							 
		<thead>
			<tr>
				<th>Usuarios</th>
				<th>Preguntas</th>
				<th>Fecha de publicacion</th>
				
			</tr>
		</thead>
	

		<tbody id="tablaPreguntas">
			<tr th:each="pregunta : ${producto.preguntas}">
				<td th:text="${pregunta.usuario.nombre}"></td>
				<td th:text="${pregunta.textoPregunta}"></td>
				<td th:text="${pregunta.fechaPregunta}"></td>
			</tr>
		</tbody>
	</table>
	


</body>
</html>